from django.urls import path
from . import views
from django.views.generic import RedirectView
from .views import statistiques_view

urlpatterns = [
    # path('signup',views.signup, name='signup'),
    # path('signin',views.signin, name='signin'),
    path("signup/", views.signup, name="signup"),
    path("signin/", views.signin, name="signin"),  # Redirige vers allauth
    path('signout',views.signout, name='signout'),
    path('profile',views.profile, name='profile'),
    path('update_profile',views.update_profile, name='update_profile'),
    path('store/create/', views.create_store, name='create_store'),
    path('store/edit/<slug:slug>/', views.edit_store, name='edit_store'),  # Use slug
    path('store/delete/<slug:slug>/', views.delete_store, name='delete_store'),
    path('store/<int:store_id>/', views.store_detail, name='store_detail'),
    path('store/<int:pk>/add_testimonial/', views.TestimonialCreateView.as_view(), name='add_testimonial'),
    path('store/<slug:slug>/create-category/', views.create_category, name='create_category'),
    path('store/<slug:slug>/category/edit/<int:category_id>/', views.edit_category, name='edit_category'),
    path('store/<int:store_id>/categories/', views.list_categories, name='list_categories'),
    path('store/<int:store_id>/product/create/', views.create_product, name='create_product'),
    path('store/<slug:slug>/products/', views.manage_product_store, name='manage_product_store'),
    path('product/edit/<int:product_id>/', views.edit_product, name='edit_product'),
    path('delete_photo/<int:photo_id>/', views.delete_photo, name='delete_photo'),
    path('product/delete/<int:product_id>/', views.delete_product, name='delete_product'),
    # path('cart/', views.cart_detail, name='cart_detail'),
    # path('cart/add/<int:product_id>/', views.add_to_cart, name='add_to_cart'),
    path('cart/update/<int:cart_item_id>/<int:quantity>/', views.update_cart, name='update_cart'),
    path('cart/remove/<int:cart_item_id>/', views.remove_from_cart, name='remove_from_cart'),
    path('checkout/', views.checkout, name='checkout'),
    path('store/<slug:slug>/', views.store_detail, name='store_detail'),
    path('store/<slug:slug>/create_category/', views.create_category, name='create_category'),
    path('store/<slug:slug>/create_product/', views.create_product, name='create_product'),
    path('store/<int:store_id>/assign-category/', views.assign_category, name='assign_category'),
    path('product/<int:id>/', views.product_detail, name='product_detail'),
    path('ajouter-au-panier/<int:product_id>/', views.add_to_cart_ajax, name='add_to_cart_ajax'),
    path('add-to-cart-success/', views.add_to_cart_success, name='add_to_cart_success'),
    path('panier/', views.cart_detail, name='cart_detail'),
    path('get-cart-items-count/', views.get_cart_items_count, name='get_cart_items_count'),
    path('store/<slug:slug>/add_testimonial/', views.add_testimonial, name='add_testimonial'),
    path('product/<int:id>/add_testimonialproduct/', views.add_testimonialproduct, name='add_testimonialproduct'),
    path('checkout/', views.checkout, name='checkout'),
    path('payment_success/', views.payment_success, name='payment_success'),
    path('payment_cancel/', views.payment_cancel, name='payment_cancel'),
    path('order/<int:order_id>/detail/', views.order_detail, name='order_detail'),
    path('store/<slug:slug>/orders/<str:order_date>/', views.orders_by_date_detail, name='orders_by_date_detail'),
    # path('order-detail/<str:client_username>/', views.order_detail_store, name='order_detail_store'),
    path('store/<slug:slug>/orders/<str:client_username>/details/<int:order_id>/', views.order_detail_store, name='order_detail_store'),
    path('store/<slug:slug>/orders/<str:order_date>/client/<str:client_username>/details/', views.orders_by_date_detail_detail, name='orders_by_date_detail_detail'),
    path('mobile-money-checkout/', views.mobile_money_checkout, name='mobile_money_checkout'),
    path('mobile-money/waiting/<int:payment_id>/', views.mobile_money_waiting, name='mobile_money_waiting'),
    path('mobile-money-payment-success/', views.mobile_money_payment_success, name='mobile_money_payment_success'),
    path('creer-commande/', views.creer_commande, name='creer_commande'),
    path('livraison/<int:commande_id>/', views.livraison_detail, name='livraison_detail'),
    path('api/cellules/', views.get_cellules, name='get_cellules'),
    path('load-cellules/', views.load_cellules, name='load_cellules'),
    path('product/<int:id>/contact/', views.contact_product, name='contact_product'),
    path('store/<slug:slug>/contact/', views.contact_store, name='contact_store'),
    path('generer-word/<slug:slug>/<str:order_date>/<str:client_username>/', views.generer_word, name='generer_word'),
    path('rewards/', views.list_product_rewards, name='list_product_rewards'),
    path('buy/<int:product_id>/', views.buy_product, name='buy_product'),  # Cette ligne doit exister
    path('insufficient_points/', views.insufficient_points, name='insufficient_points'),
    path('succees/', views.succees, name='succees'),
    path('search/', views.search_stores, name='search_stores'),
    path('search_product/', views.search_products, name='search_products'),
    path('api/save_user_location/', views.save_user_location, name='save_user_location'),
    # Route pour récupérer les magasins proches en JSON via AJAX
    path('api/get_stores_nearby/', views.get_stores_nearby, name='get_stores_nearby'),
    path("ads/<int:ad_id>/interact/<str:interaction_type>/", views.interact_with_ad, name="interact_with_ad"),
    path('advertisements/', views.advertisement_list, name='advertisement_list'),
    path('comment/<slug:ad_slug>/comments/', views.ad_comments, name='ad_comments'),
    path('like/<int:ad_id>/', views.handle_like, name='handle_like'),
    path('advertisement/<slug:slug>/', views.advertisement_detail, name='advertisement_detail'),
    path('user/dashboard/', views.user_dashboard, name='user_dashboard'),
    path('share_ad/<slug:ad_slug>/', views.share_ad, name='share_ad'),
    path('advertisement/<slug:ad_slug>/share/', views.ad_share, name='ad_share'),
    path('advertisement/<slug:slug>/share/', views.record_share, name='record_share'),
    path('rewards/<int:product_id>/',  views.detail_product_reward, name='detail_product_reward'),
    path('store/<slug:slug>/spotpub/', views.add_or_update_spotpub, name='add_or_update_spotpub'),
    path('ad/<slug:slug>/visit/', views.visit_ad_url, name='visit_ad_url'),
    path('ads/<slug:slug>/visit-no-reward/', views.visit_ad_url_no_points, name='visit_ad_url_no_points'),
    path('statistiques/', statistiques_view, name='statistiques'),
    path('loteries/', views.lottery_list, name='lottery_list'),
    path('loteries/<int:lottery_id>/participer/', views.participate_in_lottery, name='participate_in_lottery'),
    path('loteries/<int:lottery_id>/resultat/', views.lottery_result, name='lottery_result'), 
    path('<slug:slug>/toggle-subscription/', views.toggle_subscription, name='toggle_subscription'),
    path('<slug:slug>/toggle-subscription/', views.toggle_subscription, name='toggle_subscription'),
    path('notifications/', views.notifications_list, name='notifications_list'),
    path('notifications/mark-as-read/<int:notification_id>/', views.mark_notification_as_read, name='mark_notification_as_read'),
    path('notifications/delete/<int:notification_id>/', views.delete_notification, name='delete_notification'),
    path('notifications/delete-all/', views.delete_all_notifications, name='delete_all_notifications'),
    path('user/stores/<slug:slug>/notification/create/', views.create_notification, name='create_notification'),
    path('notifications/delete/<int:notification_id>/', views.delete_notification, name='delete_notification'),
    path('notifications/delete_all/', views.delete_all_notifications, name='delete_all_notifications'),
    # path('rewards/<int:id>/', views.product_reward_detail, name='product_reward_detail'),
    # path('rewards/contact/<int:id>/', views.contact_product_reward, name='contact_product_reward'),
    
]

